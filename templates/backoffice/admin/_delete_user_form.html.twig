<div class="delete-form-container">
    <form method="post" 
          action="{{ path('admin_delete_user', {'id': user.id}) }}" 
          class="delete-form">
        
        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ user.id) }}">
        
        <button type="button" 
                class="btn btn-danger btn-sm"
                data-bs-toggle="modal" 
                data-bs-target="#deleteUserModal{{ user.id }}">
            <i class="fas fa-trash-alt"></i>
        </button>

        {# Modal de confirmation #}
        <div class="modal fade" 
             id="deleteUserModal{{ user.id }}" 
             tabindex="-1" 
             aria-labelledby="deleteUserModalLabel{{ user.id }}" 
             aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text-danger" id="deleteUserModalLabel{{ user.id }}">
                            <i class="fas fa-exclamation-triangle me-2"></i>Confirmer la suppression
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
                    </div>
                    <div class="modal-body">
                        <p>Vous êtes sur le point de supprimer l'utilisateur : <strong>{{ user.nom }} ({{ user.email }})</strong></p>
                        <div class="alert alert-warning">
                            <i class="fas fa-exclamation-circle me-2"></i>
                            <strong>Attention :</strong> Cette action est irréversible. Toutes les données associées à cet utilisateur seront définitivement supprimées.
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            <i class="fas fa-times me-2"></i>Annuler
                        </button>
                        <button type="submit" class="btn btn-danger">
                            <i class="fas fa-trash-alt me-2"></i>Supprimer définitivement
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<style>
.delete-form-container {
    display: inline-block;
}

.delete-form .btn-danger {
    transition: all 0.2s ease;
}

.delete-form .btn-danger:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(231, 76, 60, 0.3);
}

.modal-content {
    border: none;
    border-radius: 0.5rem;
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
}

.modal-header {
    background-color: #f8f9fa;
    border-radius: 0.5rem 0.5rem 0 0;
}

.modal-title {
    font-weight: 600;
}

.alert-warning {
    border-left: 4px solid #e67e22;
}

@media (max-width: 576px) {
    .modal-dialog {
        margin: 0.5rem;
    }
}
</style> 